<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>X Trade - Modern Trading App</title>
  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* Hide scrollbar for horizontal crypto list */
    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }
    .no-scrollbar {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
  </style>
</head>
<body class="bg-gray-900 text-white overflow-x-hidden">
  <!-- Header -->
  <header class="bg-gray-800 border-b border-gray-700 p-4 flex justify-between items-center">
    <div class="w-10 h-10 bg-white text-black rounded-full flex items-center justify-center font-bold text-xl">X</div>
    <div id="balance" class="font-semibold text-lg">Balance: $10,000</div>
  </header>

  <!-- Chart Container -->
  <div class="max-w-xl mx-auto my-6 bg-gray-800 p-4 rounded-lg">
    <canvas id="tradingChart"></canvas>
  </div>

  <!-- Crypto Cards (Auto-scrolling) -->
  <div id="cryptoList" class="crypto-list no-scrollbar flex space-x-4 px-4 py-2 bg-gray-800 rounded-lg mx-4"></div>

  <!-- Fixed Buy/Sell Buttons -->
  <div class="fixed bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-4 z-50">
    <button onclick="openDialog('buy')" class="buy-btn bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded">BUY</button>
    <button onclick="openDialog('sell')" class="sell-btn bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded">SELL</button>
  </div>

  <!-- Transaction Modal -->
  <div id="transactionDialog" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden">
    <div class="bg-gray-800 rounded-lg w-11/12 max-w-md p-6 relative">
      <button onclick="closeDialog()" class="absolute top-2 right-2 text-2xl font-bold">&times;</button>
      <h3 id="transactionType" class="text-xl font-semibold mb-4">Transaction</h3>
      <input type="text" id="txnName" placeholder="Full Name" class="w-full p-3 mb-3 rounded bg-gray-700 placeholder-gray-400" />
      <input type="text" id="txnPhone" placeholder="Phone Number" class="w-full p-3 mb-3 rounded bg-gray-700 placeholder-gray-400" />
      <input type="number" id="txnAmount" placeholder="Amount ($)" class="w-full p-3 mb-3 rounded bg-gray-700 placeholder-gray-400" />
      <select id="txnMethod" class="w-full p-3 mb-4 rounded bg-gray-700">
        <option value="Card">Card</option>
        <option value="Easypaisa">Easypaisa</option>
        <option value="JazzCash">JazzCash</option>
      </select>
      <button onclick="processTransaction()" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded">Confirm</button>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    // Initial balance and holdings for simulation
    let balance = 10000;
    let prevPrice = null; // For chart comparison

    // Update balance display
    function updateBalanceDisplay() {
      document.getElementById("balance").innerText = `Balance: $${balance.toFixed(2)}`;
    }
    updateBalanceDisplay();

    // Transaction processing (simulate buy/sell affecting balance)
    function processTransaction() {
      const amount = parseFloat(document.getElementById("txnAmount").value);
      const txnType = document.getElementById("transactionType").innerText.toLowerCase();
      if (isNaN(amount) || amount <= 0) {
        alert("Invalid amount!");
        return;
      }
      if (txnType.includes("buy")) {
        balance -= amount;
      } else {
        balance += amount;
      }
      updateBalanceDisplay();
      alert(`${txnType.includes("buy") ? "Purchase" : "Sale"} successful!`);
      // Reset form fields
      document.getElementById("txnName").value = "";
      document.getElementById("txnPhone").value = "";
      document.getElementById("txnAmount").value = "";
      closeDialog();
    }

    // Modal control functions
    function openDialog(type) {
      document.getElementById("transactionType").innerText = type === "buy" ? "Buy Crypto" : "Sell Crypto";
      document.getElementById("transactionDialog").classList.remove("hidden");
    }
    function closeDialog() {
      document.getElementById("transactionDialog").classList.add("hidden");
    }

    // Chart.js setup for BTC Price chart
    const ctx = document.getElementById("tradingChart").getContext("2d");
    const chart = new Chart(ctx, {
      type: "line",
      data: {
        labels: [],
        datasets: [{
          label: "BTC Price",
          data: [],
          borderColor: "green",
          backgroundColor: "rgba(0, 255, 0, 0.2)",
          borderWidth: 2,
          pointRadius: 0,
          tension: 0.1
        }]
      },
      options: {
        responsive: true,
        animation: { duration: 500 },
        scales: {
          x: { grid: { display: false } },
          y: { grid: { display: true, color: "rgba(255, 255, 255, 0.1)" } }
        }
      }
    });

    function updateChart() {
      let newPrice = (Math.random() * 50000 + 10000).toFixed(2);
      if (prevPrice !== null) {
        chart.data.datasets[0].borderColor = newPrice > prevPrice ? "green" : "red";
        chart.data.datasets[0].backgroundColor = newPrice > prevPrice ? "rgba(0,255,0,0.2)" : "rgba(255,0,0,0.2)";
      }
      chart.data.labels.push(new Date().toLocaleTimeString());
      chart.data.datasets[0].data.push(newPrice);
      if (chart.data.labels.length > 20) {
        chart.data.labels.shift();
        chart.data.datasets[0].data.shift();
      }
      chart.update();
      prevPrice = newPrice;
    }
    setInterval(updateChart, 5000);

    // Auto-scrolling crypto cards with simulated price updates
    const cryptoList = document.getElementById("cryptoList");
    const cryptoSymbols = ["BTC", "ETH", "XRP", "LTC", "ADA", "DOT", "DOGE", "SOL", "BNB"];
    function updateCryptoCards() {
      cryptoList.innerHTML = "";
      cryptoSymbols.forEach(symbol => {
        let price = (Math.random() * 5000 + 1000).toFixed(2);
        let color = Math.random() > 0.5 ? "green" : "red";
        let arrow = color === "green" ? "▲" : "▼";
        cryptoList.innerHTML += `<div class="crypto-card"><span>${symbol}</span>$${price} <span class="font-bold" style="color:${color}">${arrow}</span></div>`;
      });
    }
    updateCryptoCards();
    setInterval(updateCryptoCards, 5000);

    // Smooth auto-scroll for crypto cards
    setInterval(() => {
      cryptoList.scrollBy({ left: 2, behavior: "smooth" });
    }, 100);
  </script>
</body>
</html>
